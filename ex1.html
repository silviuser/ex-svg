<!DOCTYPE html>
<head>
    <title>Constructor de Poligon</title>
    <style>
        #drawing-area{
            border:2px solid black;
            background-color: beige;
            width: 100%;
            height: 600px;
            cursor: crosshair;
        }
        button{
            margin-top: 10px;
            padding: 10px 15px;
            background-color: goldenrod;
            color: white;
            border:none;
            cursor: pointer;
        }
        svg polygon{
            fill:orange;
            fill-opacity: 0.4;
            stroke: orange;
            stroke-width: 3;
        }
    </style>
</head>
<body>
    <h1>Deseneaza un poligon</h1>
    <button onclick="resetDrawing()">Reseteaza Poligonul</button>
    <svg id="drawing-area"> </svg>

    <script>
    const drawingArea = document.getElementById('drawing-area');
    let pointsArray = [];
    let polygonElement = null;

    drawingArea.onclick=function(e){
        const x = e.clientX - drawingArea.getBoundingClientRect().left;
        const y = e.clientY - drawingArea.getBoundingClientRect().top;

        pointsArray.push(`${x},${y}`);
        updatePolygon();
        drawPoint(x, y);
    };
    
    function drawPoint(x, y) {
        const point = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        point.setAttribute('cx', x);
        point.setAttribute('cy', y);
        point.setAttribute('r', '5');
        point.setAttribute('fill','blue')
        point.setAttribute('class', 'point'); 

        drawingArea.appendChild(point);
    }

    function updatePolygon() {
        const pointsString = pointsArray.join(' ');
        if (!polygonElement) {
            polygonElement = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
            drawingArea.appendChild(polygonElement);
        }
        polygonElement.setAttribute('points', pointsString);
    }

    function resetDrawing() {
        pointsArray = [];
        if (polygonElement) {
            polygonElement.remove();
            polygonElement = null;
        }
        const currentPoints = drawingArea.querySelectorAll('.point');
        currentPoints.forEach(p => p.remove());
    }
    </script>
</body>
</html>